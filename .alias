## Common
alias mkdir="mkdir -pv"
alias ls="ls -tr --color=auto -ha"
alias l="ls -lF"
alias cp="cp -ir"
alias mv="mv -i"
alias ln='ln -i'
alias rm="rm -I -v --preserve-root"
alias du="du -ch"
# ds = dusort sorts the current directory items decreasingly.
# If a directory is provided as an argument it sorts that instead.
function ds () { du -sh ${1-.}/* | sort -hr ; }

# Command line head / tail shortcuts
alias -g H='| head'
alias -g T='| tail'
alias -g G='| grep'
alias -g L="| less"
alias -g M="| most"
alias -g LL="2>&1 | less"
alias -g CA="2>&1 | cat -A"
alias -g NE="2> /dev/null"
alias -g NUL="> /dev/null 2>&1"
alias -g P="2>&1| pygmentize -l pytb"

alias free="free -mt"
alias ps="ps auxf"
alias psgrep="ps | grep -v grep | grep -i -e VSZ -e"
alias scp="scp -Cvp -S '$HOME/.ssh-ide/ssh-ident' "
alias rsync="rsync -avzS --partial --progress -e '$HOME/.ssh-ide/ssh-ident' "

# needed because the shell checks only the first word of a command for an alias so
# "sudo somealias" won't work if sudo isn't also an alias
alias sudo='sudo '

alias fn="find . -iname "
alias fd='find . -type d -name'
alias ff='find . -type f -name'
# finds duplicate files in the current folder by checking size first and then md5 hash
alias find_dups='find -not -empty -type f -printf "%s\n" | sort -rn | uniq -d | xargs -I{} -n1 find -type f -size {}c -print0 | xargs -0 md5sum | sort | uniq -w32 --all-repeated=separate'
alias df="df -Tha --total"
alias h="history"
alias chown='chown --preserve-root'
alias chmod='chmod --preserve-root'
alias chgrp='chgrp --preserve-root'
alias cls=' echo -ne "\033c"'
alias chmodXfolders='find . -type d -exec chmod g+x {} \;'
alias disks="df -ha"

# time since installation based on oldest pacman.log entry.
alias timesinceinstall="echo $(($(($(date +%s) - $(date -d "$(head -1 /var/log/pacman.log | cut -d ' ' -f 1,2 | tr -d '[]')" +%s))) / 86400)) days"
alias open='mimeo'
alias pm='pacman'
alias pk='packer'
alias rg="ranger"
alias less="less -x4SRFX"
alias ack='ack -i --follow'
alias ag='ag -fi --hidden --numbers --column --stats'
alias sysinfo='inxi -Fzx'
alias s="nocorrect git status"
alias exit='history -c; exit'

## Navigation just in case:
# cd and ls in one. It changes directory to the first argument given (else to $HOME) 
# and lists the files/directories there.
cl() { \cd "${1-$HOME}" && l; }

alias ~="cd $HOME"
alias ..="cd .."
alias ...="cd ../../"
alias ....="cd ../../.."
alias .....="cd ../../../.."
alias cd..="cd .."
alias cd="cl"

## Files
alias diff="colordiff -y --suppress-common-lines "              # requires colordiff package
function dfl () { diff $@ | less ; }

alias mount_column='mount | column -t'
alias duplicity="\duplicity --verbosity info --volsize 150 --num-retries 3 --asynchronous-upload --full-if-older-than 90D --log-file /var/log/duplicity.log "
alias duplicity_test="\duplicity --dry-run --no-encryption -v info "

# Mount related
alias mountandroid="mtpfs -o allow_other /media/smartphone"
alias umountandroid="fusermount -u /media/smartphone"
alias azamount="sshfs azazel:/media /mnt/azazel/ -C -p 1981"
alias azaumount="fusermount -u /mnt/azazel/"

## Network related
# Shows your WAN IP, when you`re sitting behind a router
alias myip2="curl ifconfig.me"
alias myip="curl icanhazip.com"

alias traceroute="mtr "
alias icurl="curl -I"
alias wget="wget -c"
alias net="netstat -alputen"
alias ping="ping -c4"
alias wget_full="wget --random-wait -r -p -e robots=off -U mozilla " # downloads full webpage recursively

alias ssh="$HOME/.ssh-ide/ssh-ident"
alias ssh-keygen-ed="ssh-keygen -t ed25519 -a 500 -f "
alias ssh-keygen-rsa="ssh-keygen -t rsa -b 4096 -a 500 -f "

alias sniffhttp="ngrep -d 'wlan0' -t '^(GET|POST) ' 'tcp and port 80'" # view HTTP traffic

alias lanshare="python -m SimpleHTTPServer 8080" # share the current dir from port 8080

alias listening_connections="lsof -Panl -i tcp -i udp" # show listening connections

alias openports='netstat -nape --inet' # display open ports

# Some useful nmap aliases for scan modes

# Nmap options are:
#  -sS - TCP SYN scan
#  -v - verbose
#  -T1 - timing of scan. Options are paranoid (0), sneaky (1), polite (2), normal (3), aggressive (4), and insane (5)
#  -sF - FIN scan (can sneak through non-stateful firewalls)
#  -PE - ICMP echo discovery probe
#  -PP - timestamp discovery probe
#  -PY - SCTP init ping
#  -g - use given number as source port
#  -A - enable OS detection, version detection, script scanning, and traceroute (aggressive)
#  -O - enable OS detection
#  -sA - TCP ACK scan
#  -F - fast scan
#  --script=vulscan - also access vulnerabilities in target

alias nmap_open_ports="nmap --open"
alias nmap_list_interfaces="nmap --iflist"
alias nmap_slow="nmap -sS -v -T1"
alias nmap_fin="nmap -sF -v"
alias nmap_full="nmap -sS -T4 -PE -PP -PS80,443 -PY -g 53 -A -p1-65535 -v"
alias nmap_check_for_firewall="nmap -sA -p1-65535 -v -T4"
alias nmap_ping_through_firewall="nmap -PS -PA"
alias nmap_fast="nmap -F -T5 --top-ports 300"
alias nmap_detect_versions="nmap -sV -p1-65535 -O --osscan-guess -T4 -Pn"
alias nmap_check_for_vulns="nmap --script=vulscan"

# Youtube
alias youtube-dl='youtube-dl -ci --restrict-filenames -f 22/18/45/35/h264-sd/flv/mp4-sd/mp4/best '
alias youtube-dlm='youtube-dl --extract-audio --audio-format mp3 -o "$HOME/Downloads/music/%(title)s.%(ext)s" '

## Other
alias tmux="tmux -2u"
alias chromium="chromium --enable-seccomp-sandbox --memory-model=low --purge-memory-button --disk-cache-dir=/dev/shm/chromium-cache --disk-cache-size=300000000"
alias mutt="dtach -A $HOME/.mutt/mutt.session mutt"
alias netbeans="netbeans --laf com.sun.java.swing.plaf.gtk.GTKLookAndFeel"
alias sscrot="scrot -s /tmp/shot.png"
alias curlpaste='curlpaste -p -e ca '

# fortune equality
alias fortune="fortune -e -a"
# Gets a random Futurama quote from slashdot.org(/.)
alias futurama="curl -Is slashdot.org | egrep '^X-(F|B|L)' | cut -d \- -f 2"
alias matrix="tr -c \"[:digit:]\" \" \" < /dev/urandom | dd cbs=$COLUMNS conv=unblock | GREP_COLOR=\"1;32\" grep --color \"[^ ]\""
alias binclock="watch -n 1 'echo \"obase=2;\`date +%s\`\" | bc'"
alias lotto="shuf -i 1-49 | head -n6 | sort -n | xargs" # randomizer

alias moo='/usr/bin/fortune -ea | cowsay -f small -e oQ'
alias mineall='minerd -t 2 --url=stratum+tcp://eu.multipool.us:7777 --userpass=cypha.4:x'

# compress/optimize
alias compresspdf='gs -dNOPAUSE -dBATCH -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dPDFSETTINGS=/screen -sOutputFile='
alias removeexif='mogrify -strip'
alias mp4tomp3indir='for f in *.mp4; do ffmpeg -loglevel panic -i "$f" -vn -c:a libmp3lame -ar 44100 -ac 2 -ab 192k "${f/%mp4/mp3}"; done'
alias optimizepngsindir='find . -iname "*.png" | xargs optipng -o2 -preserve'
alias optimizejpgsindir='find . -iname "*.jpg" -o -iname "*.jpeg" | xargs jpegoptim --strip-all'
alias optimizeffdbs='for f in ~/.mozilla/firefox/*.default/*.sqlite; do sqlite3 $f "VACUUM;"; done'

## Update related
alias upz='packer -Syyu'
alias cleanz='pacman -Sc'
alias listdeps='pacman -Qdt' # lists unused dependencies/leftover packages
alias listallpacks="pacman -Qi | sed -n '/^Name[^:]*: \(.*\)/{s//\1 /;x};/^Installed[^:]*: \(.*\)/{s//\1/;H;x;s/\n//;p}' | sort -nk2"
alias listallexplpacks="pacman -Qeq" # list all explicitly installed packages
alias updatemirrors='reflector --verbose --country Germany -l 200 -p http --sort rate --save /etc/pacman.d/mirrorlist'
alias restartdns='pdnsd-ctl empty-cache && /etc/rc.d/pdnsd restart'
alias jerror='journalctl -b -p err'
alias updategitextras='(cd /tmp && rm -rf /tmp/git-extras && git clone --depth 1 https://github.com/tj/git-extras.git && cd git-extras && sudo make install)'
# One Alias to rule them all, One Alias to find them, One Alias to fetch them all and in the staleness update them
function updateall(){
    git supdateall && echo "\nSubmodules of dotfiles updated\n";
    updategitextras && echo "\nGit Extras updated\n";
    sudo updatemirrors && echo "\nMirrors Updated\n";
    sudo gem update && sudo gem update --system && sudo gem clean && echo "\nGems updated\n";
    upgrade_oh_my_zsh && echo "\n Oh My Zsh updated\n";
    sudo hostsblock && echo "\nHostsBlock updated\n";
    vim +PluginUpdate +qall && echo "\nVim plugins updated\n";
    upz && echo "\nSystem updated\n";
}


# fasd stuff
alias c='fasd_cd -d' # quick directory jump
alias v='f -t -e vim -b viminfo' # quick opening files with vim
alias sm='f -e smplayer' # quick opening files with mplayer
alias o='a -e xdg-open' # quick opening files with xdg-open

