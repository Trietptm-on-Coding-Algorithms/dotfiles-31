#!/usr/bin/env bash

# better colors for man pages
man() {
        env \
                LESS_TERMCAP_mb=$(printf "\e[1;31m") \
                LESS_TERMCAP_md=$(printf "\e[1;31m") \
                LESS_TERMCAP_me=$(printf "\e[0m") \
                LESS_TERMCAP_se=$(printf "\e[0m") \
                LESS_TERMCAP_so=$(printf "\e[1;44;33m") \
                LESS_TERMCAP_ue=$(printf "\e[0m") \
                LESS_TERMCAP_us=$(printf "\e[1;32m") \
                        man "$@"
}

extract() {
    local c e i

    (($#)) || return

    for i; do
        c=''
        e=1

        if [[ ! -r $i ]]; then
            echo "$0: file is unreadable: \`$i'" >&2
            continue
        fi

        case $i in
                *.tar.bz2) c='tar xvjf $1' ;;
                *.tar.gz) c='tar xvzf $1' ;;
                *.tar) c='tar xvf $1' ;;
                *.tbz2) c='tar xvjf $1' ;;
                *.tgz) c='tar xvzf $1' ;;
                *.7z)  c='7z x';;
                *.Z)   c='uncompress';;
                *.bz2) c='bunzip2';;
                *.exe) c='cabextract';;
                *.gz)  c='gunzip';;
                *.rar) c='unrar x';;
                *.xz)  c='unxz';;
                *.zip) c='unzip';;
                *)     echo "$0: unrecognized file extension: \`$i'" >&2
                    continue;;
        esac

        command $c "$i"
        e=$?
    done

    return $e
}

# cd and ls in one
cl() {
    dir=$1
    if [[ -z "$dir" ]]; then
        dir=$HOME
    fi
    if [[ -d "$dir" ]]; then
        cd "$dir"
        l
    else
        echo "bash: cl: '$dir': Directory not found"
    fi
}
